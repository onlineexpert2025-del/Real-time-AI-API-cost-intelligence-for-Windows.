<Window x:Class="CostPulse.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings" Height="500" Width="600"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize"
        Background="#222">
    <Window.Resources>
        <Style TargetType="TabItem">
            <Setter Property="Background" Value="#333"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border Name="Border" BorderThickness="1,1,1,0" BorderBrush="#555" CornerRadius="4,4,0,0" Margin="2,0">
                            <ContentPresenter x:Name="ContentSite"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center"
                                            ContentSource="Header"
                                            Margin="10,5"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#444" />
                            </Trigger>
                            <Trigger Property="IsSelected" Value="False">
                                <Setter TargetName="Border" Property="Background" Value="#222" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Portfolio Banner -->
        <Border x:Name="PortfolioBanner" Background="#2E7D32" Padding="8" Margin="0,0,0,10" CornerRadius="4" Visibility="Collapsed">
             <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <TextBlock Text="PORTFOLIO MODE" FontWeight="Bold" Foreground="White" Margin="0,0,5,0"/>
                <TextBlock Text="â€” All Pro Features Enabled" Foreground="#EEE"/>
            </StackPanel>
        </Border>

        <TextBlock Grid.Row="1" Text="Settings" Foreground="White" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>

        <TabControl Grid.Row="2" Background="Transparent" BorderThickness="0">
            <!-- General Tab -->
            <TabItem Header="General">
                <StackPanel Margin="10">
                    <TextBlock Text="Daily Budget:" Foreground="#AAA"/>
                    <TextBox x:Name="TxtBudget" Width="100" HorizontalAlignment="Left" Background="#333" Foreground="White" BorderBrush="#555"/>
                    
                    <TextBlock Text="Currency Symbol:" Foreground="#AAA" Margin="0,10,0,0"/>
                    <TextBox x:Name="TxtCurrency" Width="50" HorizontalAlignment="Left" Background="#333" Foreground="White" BorderBrush="#555"/>
                     
                    <CheckBox x:Name="ChkAlwaysOnTop" Content="Widget Always On Top" Foreground="White" Margin="0,15,0,0"/>
                    <CheckBox x:Name="ChkRunOnStartup" Content="Run on Startup" Foreground="White" Margin="0,10,0,0"/>

                    <Separator Background="#444" Margin="0,20"/>
                    
                    <TextBlock Text="License Key (Pro):" Foreground="#AAA" Margin="0,0,0,0"/>
                    <TextBox x:Name="TxtLicense" Width="300" HorizontalAlignment="Left" Background="#333" Foreground="White" BorderBrush="#555" Margin="0,5,0,0"/>
                    <TextBlock Text="Unlocks Analytics and Log Import features." FontSize="11" Foreground="#666" Margin="0,2,0,0"/>

                    <Separator Background="#444" Margin="0,20"/>

                    <TextBlock Text="Cloud Sync (Mock Architecture):" Foreground="#AAA" Margin="0,0,0,5"/>
                    <StackPanel Orientation="Horizontal">
                        <CheckBox x:Name="ChkCloudSync" Content="Enable Cloud Sync" Foreground="White" VerticalAlignment="Center"/>
                        <Button x:Name="BtnSyncNow" Content="Sync Now" Width="80" Height="22" Margin="20,0,0,0" Click="BtnSyncNow_Click" Background="#444" Foreground="White"/>
                    </StackPanel>
                    <TextBlock x:Name="TxtLastSync" Text="Last Sync: Never" FontSize="11" Foreground="#888" Margin="0,5,0,0"/>
                </StackPanel>
            </TabItem>

            <!-- Pricing Tab -->
            <TabItem Header="Pricing Models">
                <Grid Margin="0,10,0,0">
                     <DataGrid x:Name="GridPricing" AutoGenerateColumns="False" 
                          Background="#333" Foreground="Black" RowBackground="#EEE" AlternatingRowBackground="#DDD"
                          CanUserAddRows="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Model Name" Binding="{Binding ModelName}" Width="*"/>
                            <DataGridTextColumn Header="Input $/1M" Binding="{Binding InputPricePerMillion}" Width="100"/>
                            <DataGridTextColumn Header="Output $/1M" Binding="{Binding OutputPricePerMillion}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- Logs Tab (Pro) -->
            <TabItem Header="Log Import (Pro)">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <TextBlock Text="Watch Folders for Usage Logs (JSON)" Foreground="#AAA" Margin="0,0,0,5"/>
                    
                    <ListBox x:Name="ListLogPaths" Grid.Row="1" Background="#333" Foreground="White" BorderBrush="#555"/>
                    
                    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,10,0,0">
                        <Button x:Name="BtnAddFolder" Content="Add Folder" Width="100" Height="25" Click="BtnAddFolder_Click" Background="#444" Foreground="White"/>
                        <Button x:Name="BtnRemoveFolder" Content="Remove Selected" Width="120" Height="25" Click="BtnRemoveFolder_Click" Background="#444" Foreground="White" Margin="10,0,0,0"/>
                    </StackPanel>
                    
                    <!-- Gate Overlay -->
                    <Border x:Name="ProGateOverlay" Grid.RowSpan="3" Background="#AA000000" Visibility="Collapsed">
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock Text="Pro Feature Locked" Foreground="White" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <TextBlock Text="Enter License Key in General tab to unlock." Foreground="#CCC" Margin="0,5,0,0"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Save Button -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="Save Settings" Width="100" Height="30" Click="BtnSave_Click" Background="#007ACC" Foreground="White"/>
        </StackPanel>
    </Grid>
</Window>
